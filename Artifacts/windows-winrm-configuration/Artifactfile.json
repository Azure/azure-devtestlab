{
    "$schema": "https://raw.githubusercontent.com/Azure/azure-devtestlab/master/schemas/2015-01-01/dtlArtifacts.json",
    "title": "WinRM Configuration",
    "description": "Configures WinRM with a self signed Https listner also handles firewall configuration to allow traffic on https through specified port",
    "tags": [
        "Windows",
        "WinRM"
    ],
    "iconUri": "",
    "targetOsType": "Windows",
    "parameters": {     
        "HostName": {
            "type": "string",
            "displayName": "Host DNS Name",
            "description": "The FQDN of machine or Domain, use the format *.azureregion.cloudapp.azure.com. For example *.northeurope.cloudapp.azure.com"
        },
        "Port": {
            "type": "int",
            "displayName": "Port",
            "description": "Specify the port to be used for default Https traffic.",
            "defaultValue": 5986
        }
    },
    "runCommand": {
        "commandToExecute": "[concat('powershell.exe -ExecutionPolicy bypass -File winrm-configuration-install.ps1 ', parameters('HostName'), ' ', parameters('Port'))]"
    }
}