{
    "$schema": "https://raw.githubusercontent.com/Azure/azure-devtestlab/master/schemas/2015-01-01/dtlArtifacts.json",
    "title": "DSC Module",
    "description": "Use this Artifact to execute a DSC module",
    "publisher": "Microsoft",
    "tags": [
        "DSC"
    ],
    "targetOsType": "Windows",
    "parameters": {
        "modulesUrl": {
            "type": "string",
            "displayName": "DSC Module to Run",
            "description": "URL for the DSC configuration module. NOTE: Can be a Github url(raw) to the zip file"
        },
        "configurationFunction": {
            "type": "string",
            "displayName": "Configuration Function ",
            "description": "DSC configuration function to call"
        },
        "vmName": {
            "type": "string",
            "displayName": "Virtual Machine Name",
            "description": "Name of the Virtual Machine that DSC will work against",
            "allowEmpty": true
        }
    },
    "runAzureVMExtension": {
        "publisher": "Microsoft.Powershell",
        "type": "DSC",
        "typeHandlerVersion": "2.17",
        "settings": {
            "ModulesUrl": "[parameters('modulesUrl')]",
            "ConfigurationFunction": "[parameters('configurationFunction')]",
            "Properties": {
                "MachineName": "[parameters('vmName')]"
            }
        },
        "protectedSettings": null
    }
}